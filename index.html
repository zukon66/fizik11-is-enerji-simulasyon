<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Is ve Enerji Teoremi - Fizik 11</title>
  <style>
    :root {
      --navy: #2c3e50;
      --blue: #3498db;
      --white: #ffffff;
      --muted: #e9f2fa;
      --accent: #f1c40f;
      --text: #1d2b36;
      --shadow: 0 10px 30px rgba(44, 62, 80, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: var(--white);
      color: var(--text);
      line-height: 1.6;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: var(--white);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--navy);
      letter-spacing: 0.5px;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 18px;
    }

    nav a {
      text-decoration: none;
      color: var(--navy);
      font-weight: 600;
      padding: 8px 12px;
      border-radius: 8px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    nav a:hover {
      background: var(--muted);
      color: var(--blue);
    }

    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
    }

    .hamburger span {
      width: 28px;
      height: 3px;
      background: var(--navy);
      border-radius: 3px;
    }

    .hero {
      background: linear-gradient(135deg, rgba(52, 152, 219, 0.12), rgba(44, 62, 80, 0.08));
      padding: 80px 20px 70px;
    }

    .hero-content {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
      align-items: center;
    }

    .hero-text h1 {
      font-size: clamp(2rem, 4vw, 3.2rem);
      color: var(--navy);
      margin-bottom: 12px;
    }

    .hero-text p {
      font-size: 1.05rem;
      margin-bottom: 16px;
    }

    .hero-text .credit {
      font-weight: 700;
      color: var(--blue);
      margin-bottom: 12px;
    }

    .cta {
      display: inline-block;
      padding: 12px 28px;
      background: var(--blue);
      color: var(--white);
      border-radius: 999px;
      text-decoration: none;
      font-weight: 700;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 30px rgba(52, 152, 219, 0.3);
    }

    section {
      padding: 60px 20px;
    }

    .section-title {
      text-align: center;
      margin-bottom: 36px;
      color: var(--navy);
      font-size: 2rem;
    }

    .cards {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .card {
      background: var(--white);
      border-radius: 16px;
      padding: 20px;
      box-shadow: var(--shadow);
      border-top: 4px solid var(--blue);
    }

    .card h3 {
      margin-bottom: 10px;
      color: var(--navy);
    }

    .formula-grid {
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .formula {
      background: var(--navy);
      color: var(--white);
      padding: 24px;
      border-radius: 14px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 700;
    }

    .simulation {
      background: var(--muted);
    }

    .mode-controls {
      max-width: 1100px;
      margin: 0 auto 24px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .mode-buttons {
      display: flex;
      gap: 10px;
    }

    .mode-buttons button {
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      background: var(--white);
      color: var(--navy);
      font-weight: 700;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .mode-buttons button.active {
      background: var(--navy);
      color: var(--white);
    }

    .sim-layout {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }

    .panel {
      background: var(--white);
      border-radius: 16px;
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .panel h3 {
      color: var(--navy);
      margin-bottom: 12px;
    }

    canvas {
      width: 100%;
      border-radius: 12px;
      background: #fefefe;
      border: 1px solid rgba(44, 62, 80, 0.15);
    }

    .control-group {
      margin-bottom: 16px;
    }

    .control-group label {
      font-weight: 600;
      color: var(--navy);
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .control-group input,
    .control-group select {
      width: 100%;
    }

    .sim-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 16px;
    }

    .sim-actions button {
      flex: 1;
      padding: 10px 12px;
      border: none;
      border-radius: 10px;
      background: var(--blue);
      color: var(--white);
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: var(--shadow);
    }

    .sim-actions button.secondary {
      background: var(--navy);
    }

    .sim-actions button:hover {
      transform: translateY(-1px);
    }

    .info-tip {
      margin-top: 6px;
      background: #ffeaa7;
      color: #5c4400;
      padding: 8px 10px;
      border-radius: 10px;
      font-size: 0.9rem;
      box-shadow: inset 0 0 0 1px rgba(92, 68, 0, 0.15);
    }

    .tips-hidden .info-tip {
      display: none;
    }

    .metrics {
      margin-top: 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .metric {
      background: var(--muted);
      padding: 10px 12px;
      border-radius: 10px;
      font-weight: 600;
      color: var(--navy);
    }

    .graphs {
      margin-top: 14px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .energy-bars {
      margin-top: 12px;
      display: grid;
      gap: 10px;
    }

    .bar {
      background: #e0e6ef;
      border-radius: 999px;
      overflow: hidden;
      height: 14px;
    }

    .bar span {
      display: block;
      height: 100%;
      width: 50%;
    }

    .bar-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--navy);
    }

    .about {
      max-width: 900px;
      margin: 0 auto;
      text-align: center;
      color: var(--navy);
    }

    footer {
      background: var(--navy);
      color: var(--white);
      text-align: center;
      padding: 20px;
    }

    @media (max-width: 900px) {
      .sim-layout {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 760px) {
      nav ul {
        display: none;
        flex-direction: column;
        gap: 10px;
        background: var(--white);
        position: absolute;
        top: 64px;
        right: 20px;
        padding: 16px;
        border-radius: 12px;
        box-shadow: var(--shadow);
      }

      nav ul.open {
        display: flex;
      }

      .hamburger {
        display: flex;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-container">
      <div class="logo">Fizik 11</div>
      <nav>
        <div class="hamburger" id="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <ul id="navLinks">
          <li><a href="#home">Ana Sayfa</a></li>
          <li><a href="#topic">Konu</a></li>
          <li><a href="#formulas">Formuller</a></li>
          <li><a href="#example">Ornek</a></li>
          <li><a href="#simulation">Simulasyon</a></li>
          <li><a href="#about">Hakkinda</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="hero" id="home">
    <div class="hero-content">
      <div class="hero-text">
        <h1>Is ve Enerji Teoremi</h1>
        <p class="credit">Proje Tuna Aydemir tarafindan yapilmistir</p>
        <p>Kuvvet, yol ve enerji arasindaki iliskiyi zamandan bagimsiz olarak kesfedin.</p>
        <a class="cta" href="#topic">Konuya Basla</a>
      </div>
      <div class="panel">
        <h3>Kisa Ozet</h3>
        <p>Bir cisme etki eden net kuvvetin yaptigi is, cismin kinetik enerjisindeki degisime esittir. Bu sayede hareketin sonucu dogrudan enerjiyle baglanir.</p>
      </div>
    </div>
  </section>

  <section id="topic">
    <h2 class="section-title">Konu Anlatimi</h2>
    <div class="cards">
      <div class="card">
        <h3>Giris (Enerji nedir?)</h3>
        <p>Enerji, bir sistemin is yapabilme kapasitesidir ve farkli turleri birbirine donusebilir.</p>
      </div>
      <div class="card">
        <h3>Fiziksel Is</h3>
        <p>Bir kuvvetin bir cismi hareket ettirmesi icin kuvvet ve yer degistirme ayni dogrultuda olmalidir.</p>
      </div>
      <div class="card">
        <h3>Kinetik Enerji</h3>
        <p>Hareket eden her cisim, hizina ve kutlesine bagli olarak kinetik enerji tasir.</p>
      </div>
      <div class="card">
        <h3>Is-Enerji Teoremi</h3>
        <p>Net is, cismin kinetik enerjisindeki degisime esittir. W_net = Delta_Ek.</p>
      </div>
    </div>
  </section>

  <section id="formulas">
    <h2 class="section-title">Formuller</h2>
    <div class="formula-grid">
      <div class="formula">W = F * x * cos(theta)</div>
      <div class="formula">Ek = 1/2 * m * v^2</div>
      <div class="formula">W_net = Delta_Ek</div>
    </div>
  </section>

  <section id="example">
    <h2 class="section-title">Ornek</h2>
    <div class="cards">
      <div class="card">
        <h3>Kisa Senaryo</h3>
        <p>10 N'luk kuvvet bir cismi 3 m itiyorsa, yapilan is 30 J olur. Eger cisim 2 m/s hiz kazaniyorsa, bu degisim kinetik enerjide gorulur.</p>
      </div>
      <div class="card">
        <h3>Yorum</h3>
        <p>Isin buyuklugu, kuvvetin dogrultusu ve alinan yol ile dogrudan ilgilidir. Aci arttikca etkili is azalir.</p>
      </div>
    </div>
  </section>

  <section class="simulation" id="simulation">
    <h2 class="section-title">Fizik Laboratuvari</h2>
    <div class="mode-controls">
      <div class="mode-buttons">
        <button class="active" id="modeA">MOD A</button>
        <button id="modeB">MOD B</button>
      </div>
      <label>
        <input type="checkbox" id="toggleTips" checked /> Sunum Ipuclarini Goster
      </label>
    </div>

    <div class="sim-layout" id="modA">
      <div class="panel">
        <h3>Mod A: Is ve Kuvvet</h3>
        <canvas id="canvasA" width="800" height="320"></canvas>
        <div class="metrics">
          <div class="metric" id="speedValue">Hiz: 0.0 m/s</div>
          <div class="metric" id="posValue">Konum: 0.0 m</div>
          <div class="metric" id="workValue">Is: 0.0 J</div>
        </div>
        <div class="graphs">
          <canvas id="graphXT" width="200" height="120"></canvas>
          <canvas id="graphVT" width="200" height="120"></canvas>
          <canvas id="graphWX" width="200" height="120"></canvas>
        </div>
      </div>
      <div class="panel" id="controlPanelA">
        <h3>Kontroller</h3>
        <div class="sim-actions">
          <button id="toggleA" type="button">Baslat</button>
          <button id="resetA" class="secondary" type="button">Sifirla</button>
        </div>
        <div class="control-group">
          <label>Kuvvet (F) <span id="fVal">20 N</span></label>
          <input type="range" id="force" min="0" max="50" value="20" />
          <div class="info-tip">Kuvvet artarsa blok daha hizli ivmelenir.</div>
        </div>
        <div class="control-group">
          <label>Aci (theta) <span id="thetaVal">0 deg</span></label>
          <input type="range" id="theta" min="0" max="60" value="0" />
          <div class="info-tip">Aci buyudukce yatay bilesen azalir, yapilan is dusulebilir.</div>
        </div>
        <div class="control-group">
          <label>Kutle (m) <span id="massVal">4 kg</span></label>
          <input type="range" id="mass" min="1" max="10" value="4" />
          <div class="info-tip">Kutle artarsa ivme azalir, cisim daha zor hizlanir.</div>
        </div>
        <div class="control-group">
          <label>Surtunme Katsayisi (mu) <span id="muVal">0.20</span></label>
          <input type="range" id="mu" min="0" max="0.8" step="0.05" value="0.2" />
          <div class="info-tip">Surtunme acilirsa mekanik enerji korunmaz, isiye donusur.</div>
        </div>
        <div class="control-group">
          <label>Yercekimi (g) <span id="gVal">9.8</span></label>
          <input type="range" id="gravity" min="1" max="15" step="0.1" value="9.8" />
          <div class="info-tip">g artarsa normal kuvvet artar, surtunme daha buyuk olur.</div>
        </div>
      </div>
    </div>

    <div class="sim-layout" id="modB" style="display:none;">
      <div class="panel">
        <h3>Mod B: Enerji Donusumu (U-Pist)</h3>
        <canvas id="canvasB" width="640" height="320"></canvas>
        <div class="energy-bars">
          <div>
            <div class="bar-label"><span>Kinetik</span><span id="ekLabel">0 J</span></div>
            <div class="bar"><span id="ekBar" style="background:#2ecc71"></span></div>
          </div>
          <div>
            <div class="bar-label"><span>Potansiyel</span><span id="epLabel">0 J</span></div>
            <div class="bar"><span id="epBar" style="background:#3498db"></span></div>
          </div>
          <div>
            <div class="bar-label"><span>Isi</span><span id="ehLabel">0 J</span></div>
            <div class="bar"><span id="ehBar" style="background:#e74c3c"></span></div>
          </div>
          <div>
            <div class="bar-label"><span>Toplam</span><span id="etLabel">0 J</span></div>
            <div class="bar"><span id="etBar" style="background:#f1c40f"></span></div>
          </div>
        </div>
      </div>
      <div class="panel" id="controlPanelB">
        <h3>Kontroller</h3>
        <div class="sim-actions">
          <button id="toggleB" type="button">Baslat</button>
          <button id="resetB" class="secondary" type="button">Sifirla</button>
        </div>
        <div class="control-group">
          <label>Baslangic Yuksekligi (h) <span id="hVal">3.0 m</span></label>
          <input type="range" id="height" min="1" max="5" step="0.1" value="3" />
          <div class="info-tip">Yukseklik artarsa potansiyel enerji artar, top daha hizli iner.</div>
        </div>
        <div class="control-group">
          <label>Kutle (m) <span id="massBVal">2 kg</span></label>
          <input type="range" id="massB" min="1" max="8" value="2" />
          <div class="info-tip">Kutle artarsa enerji miktari artar, ancak hareketin sekli degismez.</div>
        </div>
        <div class="control-group">
          <label>Ortam</label>
          <select id="planet">
            <option value="9.8">Dunya (g=9.8)</option>
            <option value="1.6">Ay (g=1.6)</option>
            <option value="3.7">Mars (g=3.7)</option>
          </select>
          <div class="info-tip">g dusukse top daha yavas hizlanir ve daha uzun surede hareket eder.</div>
        </div>
        <div class="control-group">
          <label>Surtunme Kaybi <span id="lossVal">0.05</span></label>
          <input type="range" id="loss" min="0" max="0.2" step="0.01" value="0.05" />
          <div class="info-tip">Surtunme varsa toplam enerji azalir ve isi artar.</div>
        </div>
        <div class="control-group">
          <label>Simulasyon Hizi <span id="speedVal">1.0x</span></label>
          <input type="range" id="simSpeed" min="0.5" max="2" step="0.1" value="1" />
          <div class="info-tip">Hizi artirmak, ayni fiziksel sureci daha kisa zamanda gosterir.</div>
        </div>
      </div>
    </div>
  </section>

  <section id="about">
    <h2 class="section-title">Hakkinda</h2>
    <div class="about">
      <p>Bu proje, 11. sinif Fizik dersi icin Is ve Enerji Teoremi konusunu modern ve interaktif bir sekilde anlatmak amaciyla hazirlandi. Simulasyonlar temel fizik prensiplerini gorsel hale getirir.</p>
    </div>
  </section>

  <footer>
    <p>© 2026 Fizik 11 - Tum haklari saklidir.</p>
  </footer>

  <script>
    const navLinks = document.getElementById("navLinks");
    const hamburger = document.getElementById("hamburger");

    hamburger.addEventListener("click", () => {
      navLinks.classList.toggle("open");
    });

    const modeAButton = document.getElementById("modeA");
    const modeBButton = document.getElementById("modeB");
    const modA = document.getElementById("modA");
    const modB = document.getElementById("modB");

    function switchMode(mode) {
      if (mode === "A") {
        modeAButton.classList.add("active");
        modeBButton.classList.remove("active");
        modA.style.display = "grid";
        modB.style.display = "none";
        resetSimA();
      } else {
        modeBButton.classList.add("active");
        modeAButton.classList.remove("active");
        modB.style.display = "grid";
        modA.style.display = "none";
        resetSimB();
      }
    }

    modeAButton.addEventListener("click", () => switchMode("A"));
    modeBButton.addEventListener("click", () => switchMode("B"));

    const toggleTips = document.getElementById("toggleTips");
    const toggleA = document.getElementById("toggleA");
    const resetA = document.getElementById("resetA");
    const toggleB = document.getElementById("toggleB");
    const resetB = document.getElementById("resetB");

    function applyTips() {
      const isChecked = toggleTips.checked;
      document.querySelectorAll(".info-tip").forEach(tip => {
        tip.style.display = isChecked ? "block" : "none";
      });
    }

    toggleTips.addEventListener("change", applyTips);

    const force = document.getElementById("force");
    const theta = document.getElementById("theta");
    const mass = document.getElementById("mass");
    const mu = document.getElementById("mu");
    const gravity = document.getElementById("gravity");

    const fVal = document.getElementById("fVal");
    const thetaVal = document.getElementById("thetaVal");
    const massVal = document.getElementById("massVal");
    const muVal = document.getElementById("muVal");
    const gVal = document.getElementById("gVal");

    const speedValue = document.getElementById("speedValue");
    const posValue = document.getElementById("posValue");
    const workValue = document.getElementById("workValue");

    const canvasA = document.getElementById("canvasA");
    const ctxA = canvasA.getContext("2d");
    const graphXT = document.getElementById("graphXT");
    const graphVT = document.getElementById("graphVT");
    const graphWX = document.getElementById("graphWX");
    const gxt = graphXT.getContext("2d");
    const gvt = graphVT.getContext("2d");
    const gwx = graphWX.getContext("2d");

    const maxX = 50;
    const groundY = canvasA.height * 0.75;
    let animIdA;

    const simA = {
      running: false,
      time: 0,
      x: 0,
      v: 0,
      F: 20,
      angle: 0,
      m: 4,
      mu: 0.2,
      g: 9.8,
      dataLog: []
    };

    function updateParamsA() {
      simA.F = parseFloat(force.value);
      simA.angle = parseFloat(theta.value);
      simA.m = parseFloat(mass.value);
      simA.mu = parseFloat(mu.value);
      simA.g = parseFloat(gravity.value);

      fVal.textContent = `${simA.F} N`;
      thetaVal.textContent = `${simA.angle} deg`;
      massVal.textContent = `${simA.m} kg`;
      muVal.textContent = simA.mu.toFixed(2);
      gVal.textContent = simA.g.toFixed(1);

      if (!simA.running) {
        drawSimA();
      }
    }

    [force, theta, mass, mu, gravity].forEach(input => {
      input.addEventListener("input", updateParamsA);
    });

    function toggleSimA() {
      simA.running = !simA.running;
      toggleA.textContent = simA.running ? "Duraklat" : "Baslat";
      if (simA.running) {
        loopA();
      }
    }

    function resetSimA() {
      simA.running = false;
      simA.time = 0;
      simA.x = 0;
      simA.v = 0;
      simA.dataLog = [];
      toggleA.textContent = "Baslat";
      cancelAnimationFrame(animIdA);
      drawSimA();
      clearGraphs();
    }

    function loopA() {
      if (!simA.running) return;

      const dt = 0.016;
      simA.time += dt;

      const angleRad = simA.angle * Math.PI / 180;
      const Fx = simA.F * Math.cos(angleRad);
      const Fy = simA.F * Math.sin(angleRad);
      const W = simA.m * simA.g;
      let normal = W - Fy;
      if (normal < 0) normal = 0;

      let friction = 0;
      if (normal > 0) {
        friction = simA.mu * normal;
        if (simA.v <= 0.001 && Fx <= friction) {
          friction = Fx;
        }
      }

      const netForce = Fx - friction;
      let accel = netForce / simA.m;

      if (simA.v <= 0 && netForce <= 0) {
        accel = 0;
        simA.v = 0;
      }

      simA.v += accel * dt;
      simA.x += simA.v * dt;

      if (simA.x > maxX) {
        simA.x = maxX;
        simA.v = 0;
        simA.running = false;
        toggleA.textContent = "Baslat";
      }

      if (Math.floor(simA.time * 60) % 5 === 0) {
        const workForce = Fx * simA.x;
        const energy = 0.5 * simA.m * simA.v * simA.v;
        simA.dataLog.push({ t: simA.time, x: simA.x, v: simA.v, w: energy });
        updateGraphsA();
      }

      drawSimA();
      animIdA = requestAnimationFrame(loopA);
    }

    function drawSimA() {
      ctxA.clearRect(0, 0, canvasA.width, canvasA.height);

      ctxA.fillStyle = "#b0b8c2";
      ctxA.fillRect(0, groundY, canvasA.width, 8);
      ctxA.fillStyle = "#7f8c8d";
      ctxA.font = "11px Segoe UI";
      const scaleX = (canvasA.width - 80) / maxX;
      for (let i = 0; i <= maxX; i += 2) {
        const tickX = 20 + i * scaleX;
        ctxA.fillRect(tickX, groundY, 1, 6);
        if (i % 4 === 0) {
          ctxA.fillText(`${i}m`, tickX - 6, groundY + 18);
        }
      }

      const boxSize = 40;
      const screenX = 20 + simA.x * scaleX;
      const screenY = groundY - boxSize;

      ctxA.fillStyle = "#3498db";
      ctxA.fillRect(screenX, screenY, boxSize, boxSize);

      ctxA.fillStyle = "#2c3e50";
      ctxA.fillText("m", screenX + boxSize / 2 - 4, screenY + boxSize / 2 + 4);

      const angleRad = simA.angle * Math.PI / 180;
      const lineLen = 40 + (simA.F * 1.2);
      const fxEnd = screenX + boxSize / 2 + Math.cos(angleRad) * lineLen;
      const fyEnd = screenY + boxSize / 2 - Math.sin(angleRad) * lineLen;

      drawArrow(ctxA, screenX + boxSize / 2, screenY + boxSize / 2, fxEnd, fyEnd, "#e67e22");
      ctxA.fillStyle = "#e67e22";
      ctxA.fillText("F", fxEnd + 4, fyEnd - 4);

      if (simA.mu > 0 && (simA.v > 0 || simA.F > 0)) {
        drawArrow(ctxA, screenX + boxSize / 2, groundY, screenX + boxSize / 2 - 35, groundY, "#8e44ad");
        ctxA.fillStyle = "#8e44ad";
        ctxA.fillText("fs", screenX + boxSize / 2 - 40, groundY - 6);
      }

      const energy = 0.5 * simA.m * simA.v * simA.v;
      speedValue.textContent = `Hiz: ${simA.v.toFixed(2)} m/s`;
      posValue.textContent = `Konum: ${simA.x.toFixed(2)} m`;
      workValue.textContent = `Is: ${energy.toFixed(2)} J`;
    }

    function drawArrow(ctx, fromx, fromy, tox, toy, color) {
      const headlen = 10;
      const dx = tox - fromx;
      const dy = toy - fromy;
      const angle = Math.atan2(dy, dx);
      if (Math.hypot(dx, dy) < 5) return;

      ctx.beginPath();
      ctx.moveTo(fromx, fromy);
      ctx.lineTo(tox, toy);
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(tox, toy);
      ctx.lineTo(tox - headlen * Math.cos(angle - Math.PI / 6), toy - headlen * Math.sin(angle - Math.PI / 6));
      ctx.lineTo(tox - headlen * Math.cos(angle + Math.PI / 6), toy - headlen * Math.sin(angle + Math.PI / 6));
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
    }

    function updateGraphsA() {
      drawMiniGraph(gxt, simA.dataLog, "t", "x", "#3498db", "Konum-Zaman");
      drawMiniGraph(gvt, simA.dataLog, "t", "v", "#27ae60", "Hiz-Zaman");
      drawMiniGraph(gwx, simA.dataLog, "x", "w", "#e74c3c", "Is-Yol");
    }

    function drawMiniGraph(ctx, data, keyX, keyY, color, label) {
      const w = ctx.canvas.width;
      const h = ctx.canvas.height;
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = "#f8fbff";
      ctx.fillRect(0, 0, w, h);
      ctx.strokeStyle = "#d0d6dd";
      ctx.strokeRect(6, 6, w - 12, h - 12);

      if (data.length < 2) return;

      const maxX = Math.max(...data.map(d => d[keyX])) || 1;
      const maxY = Math.max(...data.map(d => d[keyY])) || 1;

      ctx.beginPath();
      ctx.strokeStyle = color;
      data.forEach((p, i) => {
        const px = 10 + (p[keyX] / maxX) * (w - 20);
        const py = h - 10 - (p[keyY] / (maxY * 1.1)) * (h - 20);
        if (i === 0) ctx.moveTo(px, py); else ctx.lineTo(px, py);
      });
      ctx.stroke();

      ctx.fillStyle = "#2c3e50";
      ctx.font = "10px Segoe UI";
      ctx.fillText(label, 10, 14);
    }

    function clearGraphs() {
      [gxt, gvt, gwx].forEach(c => c.clearRect(0, 0, c.canvas.width, c.canvas.height));
    }

    const canvasB = document.getElementById("canvasB");
    const ctxB = canvasB.getContext("2d");

    const height = document.getElementById("height");
    const massB = document.getElementById("massB");
    const planet = document.getElementById("planet");
    const loss = document.getElementById("loss");
    const simSpeed = document.getElementById("simSpeed");

    const hVal = document.getElementById("hVal");
    const massBVal = document.getElementById("massBVal");
    const lossVal = document.getElementById("lossVal");
    const speedVal = document.getElementById("speedVal");

    const ekLabel = document.getElementById("ekLabel");
    const epLabel = document.getElementById("epLabel");
    const ehLabel = document.getElementById("ehLabel");
    const etLabel = document.getElementById("etLabel");

    const ekBar = document.getElementById("ekBar");
    const epBar = document.getElementById("epBar");
    const ehBar = document.getElementById("ehBar");
    const etBar = document.getElementById("etBar");

    let animIdB;
    const simB = {
      running: false,
      m: 2,
      g: 9.8,
      hStart: 3,
      muFactor: 0.05,
      speedMult: 1,
      xVal: -5,
      direction: 1,
      totalE: 0,
      heatE: 0,
      v: 0
    };

    function getTrackY(xMeter) {
      return 0.2 * xMeter * xMeter;
    }

    function getSlope(xMeter) {
      return 0.4 * xMeter;
    }

    function updateParamsB() {
      simB.hStart = parseFloat(height.value);
      simB.m = parseFloat(massB.value);
      simB.g = parseFloat(planet.value);
      simB.muFactor = parseFloat(loss.value);
      simB.speedMult = parseFloat(simSpeed.value);

      hVal.textContent = `${simB.hStart.toFixed(1)} m`;
      massBVal.textContent = `${simB.m} kg`;
      lossVal.textContent = simB.muFactor.toFixed(2);
      speedVal.textContent = `${simB.speedMult.toFixed(1)}x`;

      if (!simB.running) {
        resetSimB();
      }
    }

    function resetSimB() {
      simB.running = false;
      cancelAnimationFrame(animIdB);

      simB.hStart = parseFloat(height.value);
      simB.m = parseFloat(massB.value);
      simB.g = parseFloat(planet.value);
      simB.muFactor = parseFloat(loss.value);
      simB.speedMult = parseFloat(simSpeed.value);

      hVal.textContent = `${simB.hStart.toFixed(1)} m`;
      massBVal.textContent = `${simB.m} kg`;
      lossVal.textContent = simB.muFactor.toFixed(2);
      speedVal.textContent = `${simB.speedMult.toFixed(1)}x`;

      const startX = Math.sqrt(simB.hStart / 0.2);
      simB.xVal = -startX;
      simB.direction = 1;
      simB.heatE = 0;
      simB.v = 0;
      simB.totalE = simB.m * simB.g * simB.hStart;

      drawSimB();
      toggleB.textContent = "Baslat";
    }

    function toggleSimB() {
      simB.running = !simB.running;
      toggleB.textContent = simB.running ? "Duraklat" : "Baslat";
      if (simB.running) {
        if (simB.v < 0.001) {
          simB.xVal += 0.002 * simB.direction;
        }
        loopB();
      }
    }

    function loopB() {
      if (!simB.running) return;

      const dt = 0.02 * simB.speedMult;

      const currentH = getTrackY(simB.xVal);
      const potential = simB.m * simB.g * currentH;

      if (simB.v > 0.1) {
        const frictionLoss = simB.muFactor * simB.v * 50 * dt;
        simB.heatE += frictionLoss;
      }

      if (simB.heatE > simB.totalE) simB.heatE = simB.totalE;

      let kinetic = simB.totalE - potential - simB.heatE;
      if (kinetic < 0) kinetic = 0;

      simB.v = Math.sqrt(2 * kinetic / simB.m);

      const slope = getSlope(simB.xVal);
      const cosAlpha = 1 / Math.sqrt(1 + slope * slope);
      const vx = simB.v * cosAlpha;

      if (kinetic < 0.05) {
        simB.direction *= -1;
        simB.xVal += simB.direction * 0.02;
      } else {
        simB.xVal += simB.direction * vx * dt;
      }

      if (simB.v < 0.1 && Math.abs(simB.xVal) < 0.1) {
        simB.running = false;
        toggleB.textContent = "Baslat";
      }

      const maxMechE = simB.totalE - simB.heatE;
      const nextH = getTrackY(simB.xVal);
      const nextPE = simB.m * simB.g * nextH;

      if (nextPE > maxMechE + 0.1) {
        simB.direction *= -1;
      }

      if (Math.abs(simB.xVal) > 6.5) {
        simB.direction *= -1;
        simB.xVal += simB.direction * 0.5;
      }

      drawSimB();
      animIdB = requestAnimationFrame(loopB);
    }

    function drawSimB() {
      const w = canvasB.width;
      const h = canvasB.height;
      const scale = 40;
      const originX = w / 2;
      const originY = h - 20;

      ctxB.clearRect(0, 0, w, h);

      ctxB.beginPath();
      ctxB.strokeStyle = "#2c3e50";
      ctxB.lineWidth = 4;
      for (let ix = -7; ix <= 7; ix += 0.1) {
        const iy = getTrackY(ix);
        const px = originX + ix * scale;
        const py = originY - iy * scale;
        if (ix === -7) ctxB.moveTo(px, py); else ctxB.lineTo(px, py);
      }
      ctxB.stroke();

      const ballY = getTrackY(simB.xVal);
      const ballPx = originX + simB.xVal * scale;
      const ballPy = originY - ballY * scale - 10;

      ctxB.beginPath();
      ctxB.arc(ballPx, ballPy, 10, 0, Math.PI * 2);
      ctxB.fillStyle = "#e74c3c";
      ctxB.fill();
      ctxB.strokeStyle = "#9b1c12";
      ctxB.stroke();

      const potential = simB.m * simB.g * ballY;
      const kinetic = Math.max(simB.totalE - potential - simB.heatE, 0);
      const maxE = simB.totalE > 0 ? simB.totalE : 1;

      ekBar.style.width = `${(kinetic / maxE * 100).toFixed(2)}%`;
      epBar.style.width = `${(potential / maxE * 100).toFixed(2)}%`;
      ehBar.style.width = `${(simB.heatE / maxE * 100).toFixed(2)}%`;
      etBar.style.width = "100%";

      ekLabel.textContent = `${kinetic.toFixed(0)} J`;
      epLabel.textContent = `${potential.toFixed(0)} J`;
      ehLabel.textContent = `${simB.heatE.toFixed(0)} J`;
      etLabel.textContent = `${(kinetic + potential + simB.heatE).toFixed(0)} J`;
    }

    toggleA.addEventListener("click", toggleSimA);
    resetA.addEventListener("click", resetSimA);
    toggleB.addEventListener("click", toggleSimB);
    resetB.addEventListener("click", resetSimB);

    [height, massB, planet, loss].forEach(input => {
      input.addEventListener("input", updateParamsB);
      input.addEventListener("change", resetSimB);
    });

    simSpeed.addEventListener("input", updateParamsB);

    updateParamsA();
    updateParamsB();
    applyTips();
    switchMode("A");
  </script>
</body>
</html>
